{#
    Tabs component with improved design

    Usage:
    {% set tabs = [
        {id: 'infos', label: 'Informations', icon: '<svg>...</svg>'},
        {id: 'contacts', label: 'Contacts', badge: '5'},
    ] %}
    {% include 'components/_tabs.html.twig' with {tabs: tabs, default: 'infos'} %}

    Then for each tab panel:
    <div data-tabs-target="panel" data-tabs-for="infos" hidden>
        Content here
    </div>

    SECURITE: Le champ 'icon' utilise |raw pour afficher du SVG.
    Ne JAMAIS passer de donnees utilisateur dans ce champ.
    Seul du contenu SVG statique defini dans les templates est autorise.
#}

{% set default_tab = default|default(tabs[0].id|default('')) %}

<div data-controller="tabs" data-tabs-default-value="{{ default_tab }}">
    {# Tabs navigation #}
    <div class="bg-white rounded-t-lg border-b border-gray-200">
        <nav class="flex -mb-px overflow-x-auto" data-tabs-target="list" role="tablist" aria-label="Onglets">
            {% for tab in tabs %}
            <button type="button"
                    data-tabs-target="tab"
                    data-tabs-id="{{ tab.id }}"
                    data-action="click->tabs#select"
                    role="tab"
                    aria-selected="{{ tab.id == default_tab ? 'true' : 'false' }}"
                    aria-controls="panel-{{ tab.id }}"
                    tabindex="{{ tab.id == default_tab ? '0' : '-1' }}"
                    class="group inline-flex items-center px-6 py-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors duration-200 {{ tab.id == default_tab ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300' }}">
                {% if tab.icon is defined %}
                    <span class="mr-2">{{ tab.icon|raw }}</span>
                {% endif %}
                <span>{{ tab.label }}</span>
                {% if tab.badge is defined %}
                    <span class="ml-2 px-2 py-0.5 text-xs font-medium rounded-full {{ tab.id == default_tab ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-600 group-hover:bg-gray-200' }}">
                        {{ tab.badge }}
                    </span>
                {% endif %}
            </button>
            {% endfor %}
        </nav>
    </div>

    {# Tab panels container #}
    <div class="bg-white rounded-b-lg shadow">
        {% block tab_panels %}{% endblock %}
    </div>
</div>

<style>
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-4px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn {
        animation: fadeIn 0.2s ease-out;
    }
</style>
